# -*- coding: utf-8 -*-
"""SimulacionCumples.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1fTT9nDMkNZgGiNIKbkOuevUcRuv4t6Hb

# **Trabajo de Simulacion 1: "La paradoja del cumplea√±os"**

**Por**:
* Lorenzo, Mariela

Simulaci√≥n:
Armar una simulaci√≥n basada en ùëÅ=1000 repeticiones que permita estimar la probabilidad de que al menos dos personas en un grupo de ùëò personas elegidas al azar cumpla a√±os el mismo d√≠a.
Dar una lista de las probabilidades estimadas en funci√≥n de ùëò para ùëò entre 1 y 50.
[OPCIONAL] Si es posible, representar esas probabilidades estimadas en un gr√°fico.
Para la construcci√≥n de la simulaci√≥n, se sugiere seguir la estructura propuesta en el apartado de simulaciones num√©ricas de este Notebook.

M√≥dulos - Python
"""

# M√≥dulos necesarios para la simulaci√≥n
import random as rd
import matplotlib.pyplot as plt

""""Experimento aleatorio" = Par√°metros y Funciones"""

# --- Par√°metros ---
N = 1000  # cantidad de simulaciones (sub√≠ a 10000 para m√°s precisi√≥n)

# --- Funciones ---
def cumples(k):
    """Devuelve k cumplea√±os aleatorios (n√∫meros entre 1 y 365)."""
    return [rd.randint(1, 365) for _ in range(k)]

def hay_coincidencia(lista):
    """Devuelve True si hay al menos 2 cumplea√±os iguales."""
    return len(lista) != len(set(lista))

def proporcion_coincidencia(k, N):
    """Simula N grupos de tama√±o k y calcula la proporci√≥n con coincidencias."""
    conteo = 0
    muestras = []
    for _ in range(N):
        m = cumples(k)
        muestras.append(m)
        if hay_coincidencia(m):
            conteo += 1
    return conteo / N, muestras

def prob_teorica(k, dias=365):
    """Prob. te√≥rica de ‚â•1 coincidencia (sin a√±o bisiesto)."""
    if k > dias:
        return 1.0
    prod_distintas = 1.0
    for i in range(k):
        prod_distintas *= (dias - i) / dias
    return 1.0 - prod_distintas

""""Muestra aleatoria" = Semilla, k, probabilidades, tabla, gr√°fico"""

# --- Main ---
if __name__ == "__main__":
    print("‚ú® ¬°Bienvenido a la simulaci√≥n del Problema del Cumplea√±os! ‚ú®\n\n")
    print("Este programa te ayudar√° a visualizar el famoso dilema de probabilidad de Gachi y Pachi...\n\n")
    print("Para iniciar, ")

    # --- Semilla ---
    try:
        semilla = input("Ingresa un n√∫mero para la semilla (Enter = aleatoria): ")
        if semilla.strip():
            semilla = int(semilla)
            rd.seed(semilla)
            print(f"‚úîÔ∏è Semilla fijada en {semilla}. Resultados reproducibles.\n")
        else:
            print("üé≤ Usando una semilla aleatoria.\n")
    except ValueError:
        print("‚ö†Ô∏è Entrada no v√°lida. Usando semilla aleatoria.\n")

    # --- k = input de usuario (1...50) ---
    while True:
        try:
            k_usuario = int(input("Ingrese el n√∫mero de invitados (entre 1 y 50): "))
            if 1 <= k_usuario <= 50:
                break
            print("‚ö†Ô∏è Debe estar entre 1 y 50.\n")
        except ValueError:
            print("‚ö†Ô∏è Ingrese un entero v√°lido.\n")

 # --- Probabilidades para todos los grupos 1..50 ---
    probabilidades = []
    muestras_guardadas = {}

    for k_total in range(1, 51):
        prob_k, muestras = proporcion_coincidencia(k_total, N)
        probabilidades.append(prob_k)
        muestras_guardadas[k_total] = muestras  # guardamos muestras por si queremos mostrarlas

    # --- Resultados para el k elegido ---
    prob_sim = probabilidades[k_usuario - 1]
    muestras = muestras_guardadas[k_usuario]
    prob_teo = prob_teorica(k_usuario)

    print("\n¬°C√°lculos completos!\n")
    print(f"Probabilidad simulada para k={k_usuario}: {prob_sim:.4f} ({prob_sim*100:.2f}%)")
    print(f"Probabilidad te√≥rica  para k={k_usuario}: {prob_teo:.4f} ({prob_teo*100:.2f}%)")
    print(f"Diferencia (sim - teo): {prob_sim - prob_teo:+.4f}\n")

    # Mostrar 10 simulaciones ejemplo
    print("üé≤ Ejemplos de simulaciones:")
    to_show = min(10, N)
    for i in range(to_show):
        muestra = muestras[i]
        marca = "‚úÖ Hay coincidencia" if hay_coincidencia(muestra) else "‚ùå No hay coincidencia"
        print(f"Muestra {i+1:02d}: {muestra} ‚Üí {marca}")

# --- Tabla ---
    print("\nüìä Tabla de probabilidades (k de 1 a 50):\n")
    print("-----------------------------------------")
    print("| Personas (k) | Probabilidad Estimada |")
    print("-----------------------------------------")
    for k_tab, prob in enumerate(probabilidades, start=1):
        print(f"| {k_tab:12d} | {prob*100:20.2f}% |")
    print("-----------------------------------------")

    # --- Gr√°fico ---
    print("\nüìà Generando el gr√°fico...\n")
    k_valores = list(range(1, 51))

    plt.figure(figsize=(9, 5))
    plt.plot(k_valores, probabilidades, marker="o", linewidth=2, color="royalblue")

    # L√≠neas de referencia y personalizaci√≥n
    plt.axvline(x=23, linestyle='--', color='red', label='k = 23 (~50%)')
    plt.axhline(y=0.5, linestyle='--', color='green')
    plt.title('Probabilidad de coincidencia de cumplea√±os')
    plt.xlabel('N√∫mero de personas en el grupo (k)')
    plt.ylabel('Probabilidad estimada')
    plt.xticks(range(0, 51, 5))
    plt.grid(True, which='both', linestyle='--', linewidth=0.5)
    plt.ylim(0, 1.05)

    # Anotaciones en puntos clave
    for k_point in (23, 40, 50):
        p = probabilidades[k_point - 1]
        plt.annotate(f'{p:.2f}', (k_point, p),
                     textcoords="offset points", xytext=(0, 10), ha='center')

    plt.legend()
    plt.show()

    print("\n¬°Simulaci√≥n finalizada! üéâ")